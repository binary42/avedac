# !/bin/bash
# Author: D. Cline
# Copyright (c) MBARI 2009
# Date: December 28, 2009 - Created
# Crude check for OS, if not Linux, assume MacOSX
#
if [ ! "$MATLAB_ROOT" ]; then
    echo "Error - set MATLAB_ROOT enviroment variable"
    exit -1
fi

if [ ! "$JAVA_HOME" ]; then
    echo "Error - set JAVA_HOME environment variable"
    exit -1
fi
if [ `uname | grep Linux` ]; then
  export XAPPLRESDIR=$MATLAB_ROOT/X11/app-defaults
  export MATLAB_JAVA=$MATLAB_ROOT/jre

  a=`uname -a | grep 64`
  if [ ! "$a" ] ;then 
    echo "Setting 32-bit Linux environment variables"
    export LD_LIBRARY_PATH=~/aved/lib:$MATLAB_ROOT/runtime:$MATLAB_ROOT/bin/glnx86:$MATLAB_ROOT/sys/os/glnx86:$JAVA_ROOT/jre/lib/i386
    mvn install -PLinux -Dmaven.test.skip=true
  else 
    echo "Setting 64-bit Linux environment variables"
    export LD_LIBRARY_PATH=~/aved/lib:$MATLAB_ROOT/runtime:$MATLAB_ROOT/bin/glnxa64:$MATLAB_ROOT/sys/os/glnxa64:$JAVA_HOME/jre/lib/i386
  fi 
else
  echo "Setting MacOSX environment variables"
  export DYLD_LIBRARY_PATH=~/aved/lib:$MATLAB_ROOT/runtime:$MATLAB_ROOT/bin/maci:$MATLAB_ROOT/sys/os/maci:/System/Library/Frameworks/JavaVM.framework/JavaVM:/System/Library/Frameworks/JavaVM.framework/Libraries
  export XAPPLRESDIR=$MATLAB_ROOT/X11/app-defaults
fi
